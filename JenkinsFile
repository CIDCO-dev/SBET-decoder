pipeline {

    environment {
	major=0
	minor=1
	patch="${env.BUILD_ID}"
        name="${env.JOB_NAME}"
        version="$major.$minor.$patch"
    	exec_name="sbet-decoder-$version"

        publishDir="/var/www/html/$name/$version"
        lastPublishDir="/var/www/html/$name/last"
    }

    agent none
    stages {
        stage('TEST MASTER'){
            agent { label 'master'}
            steps {
              sh "make test"
            }
        }

        stage('DOCUMENTATION'){
          agent { label 'master'}
          steps {
              sh "make doc"
            }
        }
        stage('BUILD MASTER'){
            agent { label 'master'}
            steps {
              //sh "make deploy"
            }
        }
    }

}
